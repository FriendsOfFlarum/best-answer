(()=>{var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const s=flarum.core.compat["admin/app"];var n=e.n(s);const a=flarum.core.compat["tags/components/EditTagModal"];var r=e.n(a);const o=flarum.core.compat["common/extend"],i=flarum.core.compat["utils/Stream"];var l=e.n(i);const d=flarum.core.compat.Model;var f=e.n(d);const c=flarum.core.compat["tags/models/Tag"];var b=e.n(c);function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}const p=flarum.core.compat["admin/components/ExtensionPage"];var _=e.n(p);const g=flarum.core.compat["common/components/Button"];var h=e.n(g);const w=flarum.core.compat["common/components/Link"];var y=e.n(w),v=function(e){var t,s;function a(){return e.apply(this,arguments)||this}s=e,(t=a).prototype=Object.create(s.prototype),t.prototype.constructor=t,u(t,s);var r=a.prototype;return r.oninit=function(t){e.prototype.oninit.call(this,t),this.loading=!1},r.enableAllTags=function(){this.enable("enableAllTags")},r.enableAllReminders=function(){this.enable("enableAllReminders")},r.enable=function(e){var t=this;this.loading=!0,n().request({method:"POST",url:n().forum.attribute("apiUrl")+"/fof/best-answer/enable",body:{feature:e}}).then((function(){t.loading=!1,m.redraw()}))},r.content=function(){return[m("div",{className:"container"},m("div",{className:"BestAnswerSettingsPage"},m("div",{className:"Form"},m("div",{className:"Introduction"},m("p",null,n().translator.trans("fof-best-answer.admin.settings.introduction",{a:m(y(),{href:n().route("extension",{id:"flarum-tags"})})})),m("div",{className:"ButtonGroup"},m(h(),{className:"Button",onclick:this.enableAllTags.bind(this),loading:this.loading,disabled:this.loading,icon:"fas fa-check"},n().translator.trans("fof-best-answer.admin.settings.enable_all_tags_button")),m(h(),{className:"Button",onclick:this.enableAllReminders.bind(this),loading:this.loading,disabled:this.loading,icon:"fas fa-stopwatch"},n().translator.trans("fof-best-answer.admin.settings.enable_all_tags_reminder_button")))),m("hr",null),m("div",{className:"GeneralPreferences"},m("h3",null,n().translator.trans("fof-best-answer.admin.settings.label.general")),this.buildSettingComponent({type:"boolean",setting:"fof-best-answer.allow_select_own_post",label:n().translator.trans("fof-best-answer.admin.settings.allow_select_own_post"),help:n().translator.trans("fof-best-answer.admin.settings.allow_select_own_post_help")}),this.buildSettingComponent({type:"boolean",setting:"fof-best-answer.use_alternative_ui",label:n().translator.trans("fof-best-answer.admin.settings.use_alt_ui"),help:n().translator.trans("fof-best-answer.admin.settings.use_alt_ui_help")}),this.buildSettingComponent({type:"boolean",setting:"fof-best-answer.show_filter_dropdown",label:n().translator.trans("fof-best-answer.admin.settings.show_filter_label"),help:n().translator.trans("fof-best-answer.admin.settings.show_filter_help")}),this.buildSettingComponent({type:"number",setting:"fof-best-answer.show_max_lines",label:n().translator.trans("fof-best-answer.admin.settings.show_max_lines_label"),help:n().translator.trans("fof-best-answer.admin.settings.show_max_lines_help")}),this.buildSettingComponent({type:"flarum-tags.select-tags",setting:"fof-best-answer.select_best_answer_tags",label:n().translator.trans("fof-best-answer.admin.settings.select_best_answer_tags_label"),help:n().translator.trans("fof-best-answer.admin.settings.select_best_answer_tags_help"),options:{requireParentTag:!0,limits:{max:{primary:0}}}})),m("hr",null),m("div",{className:"Reminders"},m("h3",null,n().translator.trans("fof-best-answer.admin.settings.label.reminders")),m("p",{className:"helpText"},n().translator.trans("fof-best-answer.admin.settings.label.reminders_notice")," ",m("a",{href:"https://docs.flarum.org/console/#schedulerun",target:"_blank"},n().translator.trans("fof-best-answer.admin.settings.documentation"))),this.buildSettingComponent({type:"number",setting:"fof-best-answer.select_best_answer_reminder_days",label:n().translator.trans("fof-best-answer.admin.settings.select_best_answer_reminder_days"),placeholder:"0",min:0,help:n().translator.trans("fof-best-answer.admin.settings.select_best_answer_reminder_days_help")})),m("hr",null),m("div",{className:"AdvancedPreferences"},m("h3",null,n().translator.trans("fof-best-answer.admin.settings.label.advanced")),this.buildSettingComponent({type:"boolean",setting:"fof-best-answer.schedule_on_one_server",label:n().translator.trans("fof-best-answer.admin.settings.schedule_on_one_server"),help:n().translator.trans("fof-best-answer.admin.settings.schedule_on_one_server_help")}),this.buildSettingComponent({type:"boolean",setting:"fof-best-answer.stop_overnight",label:n().translator.trans("fof-best-answer.admin.settings.schedule_stop_overnight"),help:n().translator.trans("fof-best-answer.admin.settings.schedule_stop_overnight_help")}),this.buildSettingComponent({type:"boolean",setting:"fof-best-answer.store_log_output",label:n().translator.trans("fof-best-answer.admin.settings.schedule_log_output")})),this.submitButton())))]},a}(_());n().initializers.add("fof-best-answer",(function(){n().extensionData.for("fof-best-answer").registerPage(v).registerPermission({icon:"far fa-comment",label:n().translator.trans("fof-best-answer.admin.permissions.best_answer"),permission:"discussion.selectBestAnswerOwnDiscussion"},"reply").registerPermission({icon:"far fa-comment",label:n().translator.trans("fof-best-answer.admin.permissions.best_answer_not_own_discussion"),permission:"discussion.selectBestAnswerNotOwnDiscussion"},"reply"),n().initializers.has("flarum-tags")&&(b().prototype.isQnA=f().attribute("isQnA"),b().prototype.reminders=f().attribute("reminders"),(0,o.extend)(r().prototype,"oninit",(function(){this.isQnA=l()(this.tag.isQnA()||!1),this.reminders=l()(this.tag.reminders()||!1)})),(0,o.extend)(r().prototype,"fields",(function(e){e.add("qna",m("div",{className:"Form-group"},m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",bidi:this.isQnA}),n().translator.trans("fof-best-answer.admin.edit_tag.qna_label")))),10),e.add("reminders",m("div",{className:"Form-group"},m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",bidi:this.reminders}),n().translator.trans("fof-best-answer.admin.edit_tag.reminders")))))})),(0,o.extend)(r().prototype,"submitData",(function(e){e.isQnA=this.isQnA(),e.reminders=this.reminders()})))}))})(),module.exports=t})();
//# sourceMappingURL=admin.js.map