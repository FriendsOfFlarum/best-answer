module.exports=function(t){var e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(s,o,function(e){return t[e]}.bind(null,o));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=23)}([function(t,e){t.exports=flarum.core.compat["common/app"]},function(t,e,n){"use strict";function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,s(t,e)}n.d(e,"a",(function(){return o}))},function(t,e){t.exports=flarum.core.compat["common/extend"]},function(t,e){t.exports=flarum.core.compat["common/models/Discussion"]},function(t,e){t.exports=flarum.core.compat["common/Model"]},function(t,e){t.exports=flarum.core.compat["forum/components/Notification"]},function(t,e){t.exports=flarum.core.compat["forum/components/CommentPost"]},function(t,e){t.exports=flarum.core.compat["common/components/Link"]},function(t,e){t.exports=flarum.core.compat["forum/components/DiscussionPage"]},function(t,e){t.exports=flarum.core.compat["common/components/Button"]},function(t,e){t.exports=flarum.core.compat["common/helpers/username"]},function(t,e){t.exports=flarum.core.compat["common/helpers/icon"]},function(t,e){t.exports=flarum.core.compat["forum/components/NotificationGrid"]},function(t,e){t.exports=flarum.core.compat["forum/utils/PostControls"]},function(t,e){t.exports=flarum.core.compat["forum/components/Post"]},function(t,e){t.exports=flarum.core.compat["forum/components/PostMeta"]},function(t,e){t.exports=flarum.core.compat["common/helpers/userOnline"]},function(t,e){t.exports=flarum.core.compat["common/Component"]},function(t,e){t.exports=flarum.core.compat["common/helpers/humanTime"]},function(t,e){t.exports=flarum.core.compat["common/utils/ItemList"]},function(t,e){t.exports=flarum.core.compat["common/components/Badge"]},,,function(t,e,n){"use strict";n.r(e);var s=n(2),o=n(0),r=n.n(o),a=n(3),i=n.n(a),c=n(4),u=n.n(c),p=n(12),f=n.n(p),d=n(1),l=n(5),b=n.n(l),w=function(t){function e(){return t.apply(this,arguments)||this}Object(d.a)(e,t);var n=e.prototype;return n.icon=function(){return"fas fa-comment-dots"},n.href=function(){var t=this.attrs.notification.subject();return app.route.discussion(t)},n.content=function(){return app.translator.trans("fof-best-answer.forum.notification.content")},e}(b.a),h=n(9),A=n.n(h),y=n(13),v=n.n(y),x=n(8),P=n.n(x),_=n(6),B=n.n(_),O=n(14),j=n.n(O),S=n(15),g=n.n(S),N=n(10),k=n.n(N),U=n(16),I=n.n(U),C=n(7),T=n.n(C),D=n(17),H=n.n(D),M=n(11),L=n.n(M),z=n(18),G=n.n(z),q=n(19),E=n.n(q),F=function(t){function e(){return t.apply(this,arguments)||this}Object(d.a)(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e);var n=this.attrs,s=n.post,o=n.discussion;this.post=s,this.discussion=o},n.view=function(){return m("li",{className:"Post--BestAnswer"},this.items().toArray())},n.getSetTime=function(t){if(null!==t.bestAnswerSetAt())return G()(t.bestAnswerSetAt())},n.items=function(){var t=this,e=new E.a;return e.add("post",this.post?m("span",null,L()("fas fa-check"),app.translator.trans("fof-best-answer.forum.best_answer_button")):m(T.a,{href:app.route.post(this.post),"data-number":this.post.number()},L()("fas fa-check"),app.translator.trans("fof-best-answer.forum.best_answer_button"))),e.add("user",m("span",{className:"BestAnswer--User"},app.translator.trans("fof-best-answer.forum.best_answer_label",{user:this.discussion.bestAnswerUser(),time_set:this.getSetTime(this.discussion),a:m("a",{onclick:function(){return m.route.set(app.route.user(t.discussion.bestAnswerUser()))}})}))),e},e}(H.a),J=n(20),K=n.n(J),Q=function(t){function e(){return t.apply(this,arguments)||this}Object(d.a)(e,t);var n=e.prototype;return n.icon=function(){return"fas fa-check"},n.href=function(){var t=this.attrs.notification.subject();return app.route.discussion(t)},n.content=function(){var t=this.attrs.notification.fromUser();return app.translator.trans("fof-best-answer.forum.notification.awarded",{user:t})},e}(b.a),R=function(t){function e(){return t.apply(this,arguments)||this}Object(d.a)(e,t);var n=e.prototype;return n.icon=function(){return"fas fa-check"},n.href=function(){var t=this.attrs.notification.subject();return app.route.discussion(t)},n.content=function(){var t=this.attrs.notification.fromUser();return app.translator.trans("fof-best-answer.forum.notification.best_answer_in_discussion",{user:t})},e}(b.a),V={SelectBestAnswerItem:F};r.a.initializers.add("fof/best-answer",(function(){var t,e,n,o,a;i.a.prototype.bestAnswerPost=u.a.hasOne("bestAnswerPost"),i.a.prototype.bestAnswerUser=u.a.hasOne("bestAnswerUser"),i.a.prototype.hasBestAnswer=u.a.attribute("hasBestAnswer"),i.a.prototype.canSelectBestAnswer=u.a.attribute("canSelectBestAnswer"),i.a.prototype.bestAnswerSetAt=u.a.attribute("bestAnswerSetAt",u.a.transformDate),r.a.notificationComponents.selectBestAnswer=w,r.a.notificationComponents.awardedBestAnswer=Q,r.a.notificationComponents.bestAnswerInDiscussion=R,Object(s.extend)(i.a.prototype,"badges",(function(t){this.hasBestAnswer()&&!t.has("hidden")&&t.add("bestAnswer",K.a.component({type:"bestAnswer",icon:"fas fa-check",label:r.a.translator.trans("fof-best-answer.forum.answered_badge")}))})),t=function(t,e){return e.isHidden()||1===e.number()||!t.canSelectBestAnswer()||!app.session.user},e=function(t){return!app.forum.attribute("canSelectBestAnswerOwnPost")&&t.user()&&t.user().id()===app.session.user.id()},n=function(t,e){return t.bestAnswerPost()&&t.bestAnswerPost().id()===e.id()},o=function(t){return app.translator.trans(t?"fof-best-answer.forum.remove_best_answer":"fof-best-answer.forum.this_best_answer")},a=function(t,e,n){t.save({bestAnswerPostId:e?n.id():0,bestAnswerUserId:app.session.user.id(),relationships:e?{bestAnswerPost:n,bestAnswerUser:app.session.user}:delete t.data.relationships.bestAnswerPost}).then((function(){app.current.matches(P.a)&&app.current.get("stream").update(),m.redraw(),e&&m.route.set(app.route.discussion(t))}))},Object(s.extend)(v.a,"moderationControls",(function(s,r){if(!app.forum.attribute("useAlternativeBestAnswerUi")){var i=r.discussion(),c=n(i,r);r.pushAttributes({isBestAnswer:c}),"comment"===r.contentType()&&(t(i,r)||e(r)||!app.current.matches(P.a)||s.add("bestAnswer",A.a.component({icon:"fa"+(c?"s":"r")+" fa-comment-dots",onclick:function(){a(i,c=!c,r)}},o(c))))}})),Object(s.extend)(B.a.prototype,"actionItems",(function(s){if(app.forum.attribute("useAlternativeBestAnswerUi")){var r=this.attrs.post,i=this.attrs.post.discussion(),c=n(i,r),u=!1!==i.bestAnswerPost();r.pushAttributes({isBestAnswer:c}),t(i,r)||e(r)||!app.current.matches(P.a)||s.add("bestAnswer",A.a.component({className:u?c?"Button Button--primary":"Button Button--link":"Button Button--primary",onclick:function(){u=!u,a(i,c=!c,r)}},o(c)))}})),Object(s.extend)(B.a.prototype,"headerItems",(function(t){var e=this.attrs.post;e.discussion().bestAnswerPost()&&e.discussion().bestAnswerPost().id()===e.id()&&!e.isHidden()&&t.add("isBestAnswer",F.component({post:e,discussion:e.discussion()}))})),Object(s.extend)(B.a.prototype,"footerItems",(function(t){var e=this.attrs.post,n=e.discussion(),s=n.bestAnswerPost();if(s&&!s.isHidden()&&1===e.number()&&!e.isHidden()){var o=s.user();t.add("bestAnswerPost",m("div",{className:"CommentPost",onclick:function(){return app.current.get("stream").goToNumber(s.number())}},m("div",{className:"Post-header"},m("ul",null,m("li",{className:"item-user"},m("div",{className:"PostUser"},o&&I()(o),m("h3",null,o?m(T.a,{href:app.route.user(o)},k()(o)):k()(o)))),s.discussion()&&m("li",{className:"item-meta"},g.a.component({post:s})),F.component({post:s,discussion:n}))),m("div",{className:"Post-body"},m.trust(s.contentHtml()))),-10)}})),Object(s.extend)(j.a.prototype,"elementAttrs",(function(t){var e=this.attrs.post;e.discussion().bestAnswerPost()&&e.discussion().bestAnswerPost().id()===e.id()&&!e.isHidden()&&(t.className?t.className+=" Post--bestAnswer":t.className="Post--bestAnswer")})),Object(s.extend)(f.a.prototype,"notificationTypes",(function(t){t.add("awardedBestAnswer",{name:"awardedBestAnswer",icon:"fas fa-check",label:r.a.translator.trans("fof-best-answer.forum.notification.preferences.awarded_best_answer")}),t.add("bestAnswerInDiscussion",{name:"bestAnswerInDiscussion",icon:"fas fa-check",label:r.a.translator.trans("fof-best-answer.forum.notification.preferences.best_answer_in_discussion")})}))})),n.d(e,"components",(function(){return V}))}]);
//# sourceMappingURL=forum.js.map